---
layout: post
title: Git Notes
author: yuyang
date: 2018-07-06
description:  (optional)
img: git.jpg
comments: true
tags: [Git, Github]
---

One of the main book I referred is [Github 入门与实践](https://book.douban.com/subject/26462816/).

### Work with Github and Multiple accounts
I configured this based on the [guidance](https://code.tutsplus.com/tutorials/quick-tip-how-to-work-with-github-and-multiple-accounts--net-22574). Here is [another better instruction](https://medium.freecodecamp.org/manage-multiple-github-accounts-the-ssh-way-2dadc30ccaca).

1. Set the ssh for my personal github account.
> ssh-keygen -t rsa -C "your github account email"

2. Add the id_rsa.pub file in the SSH of **Setting** on github website.

3. Connect using ssh key
> ssh -T git@github.com 

    In this step, an error message comes out to be **Permission denied**. To fix this problem, add the following content in the _config_ file. (If do not have a config file, just create one)
```
#Default GitHub
Host github.com
  HostName github.com
  User git
  IdentityFile ~/.ssh/id_rsa_hotmail  # may change the name of rsa
```
    Once again, 
> ssh -T git@github.com 

    and it works!

4. Add my UMN github account. Following the same procedure as above, then add the following content to the _config_ file.
```
#Default GitHub
Host github.umn.edu
  HostName github.umn.edu
  User git
  IdentityFile ~/.ssh/id_rsa_UMN  
```
Then use the following command to connect using ssh.
> ssh -T git@github.umn.edu

5. To push the repository to the personal github account
> git init
>
> git commit -am "first commit"
>
> (contents of other commits) # remember this could not be empty, or errors would come out. You must have got something to commit.
> 
> git remote add origin git@github.com:username/test.git
> 
> git push -u origin master

    For work account, just replace **github.com** with **github.umn.edu** and change the corresponding username.

6. To save the passphrase in the Keychain so that you don't have to enter the passphrase every time you want to push to Github. Check [Adding your SSH key to the ssh-agent](https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#adding-your-ssh-key-to-the-ssh-agent) for detail. 
Firstly, start the ssh-agent in the background.
> eval "$(ssh-agent -s)"

Then, rewrite the `~/.ssh/config` file.
```
# UMN account
Host github.umn.edu
  HostName github.umn.edu
  User git
  IdentityFile ~/.ssh/id_rsa_UMN
  AddKeysToAgent yes
  UseKeychain yes
```

Finally, add the SSH key to the ssh-agent.
> ssh-add -K ~/.ssh/id_rsa_UMN


### Add the sharable download URL for files in Github.

Referenced from https://help.data.world/hc/en-us/articles/115006300048-GitHub-how-to-find-the-sharable-download-URL-for-files-on-GitHub.

Just use the following to format:
> https://raw.githubusercontent.com/user/repository/branch/filename

### Upload files to Github

If a repository is empty, then files could not be uploaded. Either add a README.md, either commit for once.

### combine two commits
> git rebase -i HEAD~2
Then change `pick` to `fixup`.

### Revert to previous commit
> git reset --hard 23780769395fae

### Delete the commits in Github
First delete local commits, then 
> git push --force